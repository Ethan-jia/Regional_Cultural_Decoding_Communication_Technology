{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/myVideo/index.vue?88a8","webpack:///./src/pages/myVideo/index.vue?7a37","webpack:///./src/pages/myVideo/index.vue?8017","webpack:///./src/pages/myVideo/index.vue?4bd1","uni-app:///src/pages/myVideo/index.vue","webpack:///./src/pages/myVideo/index.vue?1024","webpack:///./src/pages/myVideo/index.vue?7391"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","bg_pic","video_list","current_list","openId","total","current_page","onShow","methods","getMyVideo","page","uni","url","method","header","success","res","that","console","fail","error","handleShow","videoSrc","handleDownload","index","setTimeout","timeout","handleDelete","title","duration","icon","handlePage"],"mappings":"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","file":"pages/myVideo/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/myVideo/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=1f6be449&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/myVideo/index.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=1f6be449&\"","var components\ntry {\n  components = {\n    uniPagination: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-ui/lib/uni-pagination/uni-pagination\" */ \"@dcloudio/uni-ui/lib/uni-pagination/uni-pagination.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"myVideo-wrap\">\r\n    <view class=\"myVideo-title\">\r\n      <text class=\"title\">--每页显示生成的三条视频--</text>\r\n    </view>\r\n    <view v-for=\"(item, index) in current_list\" :key=\"index\" class=\"myVideo-content\">\r\n      <view class=\"myVideo\">\r\n        <view class=\"picture-content\">\r\n          <img :src=\"item.imgSrc\" class=\"picture\" @click=\"handleShow(item.videoSrc)\" />\r\n        </view>\r\n        <view class=\"videoInfo\">\r\n          <view class=\"info1\">\r\n            <text class=\"createDate\">{{ item.CreateDate }}</text>\r\n            <text class=\"validDate\">有效期至 {{ item.ValidDate }}</text>\r\n          </view>\r\n          <view class=\"info2\">\r\n            <button class=\"btn1\" @click=\"handleShow(item.videoSrc)\">预览</button>\r\n            <button v-if=\"item.payStatus === 0\" class=\"btn2\" @click=\"handleDownload(index)\">下载</button>\r\n            <button v-else class=\"btn2\" @click=\"handleDownload(index)\">重新下载</button>\r\n            <button class=\"btn3\" @click=\"handleDelete(index)\">删除</button>\r\n          </view>\r\n\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <uni-pagination :total=\"total\" :current=\"current_page\" prev-text=\"上一页\" next-text=\"下一页\" @change=\"handlePage\"></uni-pagination>\r\n    <view class=\"bottom-content\">\r\n      <img :src=\"bg_pic\" class=\"bottom-pic\" />\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      bg_pic: this.baseUrl + '/image/bg_pic.png/',\r\n      video_list: [],  //总数据\r\n      current_list: [],  //当前数据\r\n      openId: \"\",\r\n      total: \"\",\r\n      current_page:\"\"\r\n    };\r\n  },\r\n  onShow() {\r\n    this.openId = uni.getStorageSync(\"openId\")\r\n    this.getMyVideo(1)\r\n\r\n  },\r\n  methods: {\r\n    getMyVideo(page) {\r\n      const that = this\r\n      uni.request({\r\n        url: that.baseUrl + \"/queryMyVideo\",\r\n        method: \"GET\",\r\n        header: that.header,\r\n        data: {\r\n          openId: that.openId\r\n        },\r\n        success(res) {\r\n          if (res.statusCode === 200) {\r\n            that.video_list = res.data\r\n            that.total = that.video_list.length / 3 * 10\r\n            console.log(that.video_list);\r\n            console.log(that.total);\r\n            if(page === 1){\r\n              that.current_page=1\r\n              that.current_list = that.video_list.slice(0, 3)\r\n            }\r\n            else{\r\n              that.current_page=page\r\n              that.current_list = that.video_list.slice((that.current_page - 1) * 3, that.current_page * 3)\r\n            }\r\n          }\r\n          else {\r\n            console.log(res.statusCode);\r\n          }\r\n        },\r\n        fail(error) {\r\n          console.log(error);\r\n        }\r\n      });\r\n    },\r\n    handleShow(videoSrc) {\r\n      console.log(videoSrc);\r\n      uni.navigateTo({\r\n        url: \"/pages/videoPlay/index?url=\" + videoSrc + \"&status=2\"\r\n      })\r\n    },\r\n    handleDownload(index) {\r\n      const that = this\r\n      if (that.current_list[index].payStatus === 0) {\r\n        setTimeout(() => {\r\n          uni.request({\r\n            url: that.baseUrl + \"/get/orderId\",\r\n            method: \"GET\",\r\n            header: that.header,\r\n            timeout: 10000,\r\n            data: {\r\n              \"secretKey\": that.current_list[index].secretKey,\r\n              \"openId\": that.openId,\r\n            },\r\n            success(res) {\r\n              if (res.data.code == \"OK\") {\r\n                let goods_order = res.data.orderId\r\n                uni.navigateTo({\r\n                  url: \"/pages/payMoney/index?goods_order=\" + goods_order + \"&url=\" + that.current_list[index].videoSrc + \"&secretKey=\" +\r\n                    that.current_list[index].secretKey\r\n                })\r\n              }\r\n\r\n\r\n            },\r\n          })\r\n        }, 100);\r\n      }\r\n      else {\r\n        uni.navigateTo({\r\n          url: \"/pages/videoPlay/index?url=\" + that.video_list[index].videoSrc + \"&status=1\"\r\n        })\r\n      }\r\n\r\n    },\r\n    handleDelete(index) {\r\n      const that = this\r\n      uni.showModal({\r\n        title: '是否删除',\r\n        success(res) {\r\n          if (res.confirm) {\r\n            uni.request({\r\n              url: that.baseUrl + \"/videos/remove\",\r\n              method: \"GET\",\r\n              header: that.header,\r\n              timeout: 10000,\r\n              data: {\r\n                \"secretKey\": that.current_list[index].secretKey,\r\n                \"openId\": that.openId,\r\n              },\r\n              success(res) {\r\n                console.log(res);\r\n                if (res.data.code == \"OK\") {\r\n                  console.log('2312312312');\r\n                  console.log(that.current_page);\r\n                  setTimeout(() => {\r\n                    that.getMyVideo(that.current_page)\r\n                  }, 1000);\r\n                  uni.showToast({\r\n                    title: \"删除成功!\",\r\n                    duration: 1000,\r\n                  })\r\n                }\r\n                else {\r\n                  uni.showToast({\r\n                    title: \"删除失败!\",\r\n                    duration: 1500,\r\n                    icon: \"error\",\r\n                  })\r\n                }\r\n              },\r\n            })\r\n          }\r\n          else if (res.cancel) {\r\n            console.log(\"拒绝删除\");\r\n          }\r\n\r\n        }\r\n      })\r\n    },\r\n    handlePage(res) {\r\n      console.log(res.current);\r\n      this.current_page = res.current \r\n      this.current_list = this.video_list.slice((res.current - 1) * 3, res.current * 3)\r\n\r\n    }\r\n\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.myVideo-wrap {\r\n\r\n  position: absolute;\r\n  width: 100vw;\r\n  height: 100vh;\r\n\r\n  .myVideo-title {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 2vh;\r\n\r\n    .title {\r\n      font-size: 12px;\r\n      color: #999999;\r\n    }\r\n  }\r\n\r\n  .myVideo-content {\r\n\r\n    width: 90vw;\r\n    margin-left: 5vw;\r\n    // height: 5vh;\r\n\r\n    .myVideo {\r\n      width: 100vw;\r\n      display: flex;\r\n      flex-direction: row;\r\n      margin-top: 2vh;\r\n\r\n\r\n      .picture-content {\r\n\r\n        .picture {\r\n          width: 30vw;\r\n          height: 14vh;\r\n        }\r\n      }\r\n\r\n      .videoInfo {\r\n        display: flex;\r\n        flex-direction: row;\r\n        margin-left: 1vw;\r\n\r\n        .info1 {\r\n          display: flex;\r\n          flex-direction: column;\r\n          margin-left: 2.5vw;\r\n          margin-top: 2vh;\r\n\r\n          .createDate {\r\n            font-size: 15px;\r\n            font-weight: bold;\r\n            margin-top: 0.5vh;\r\n\r\n          }\r\n\r\n          .validDate {\r\n            font-size: 11px;\r\n            color: #999999;\r\n            margin-top: 2.5vh;\r\n\r\n          }\r\n        }\r\n\r\n        .info2 {\r\n          display: flex;\r\n          flex-direction: column;\r\n\r\n\r\n          .btn1 {\r\n            font-size: 11px;\r\n            color: #999999;\r\n            background-color: white;\r\n            position: absolute;\r\n            right: 0;\r\n            margin-right: 2vw;\r\n          }\r\n\r\n          .btn2 {\r\n            font-size: 11px;\r\n            color: #999999;\r\n            background-color: white;\r\n            position: absolute;\r\n            right: 0;\r\n            margin-right: 2vw;\r\n            margin-top: 5vh;\r\n          }\r\n\r\n          .btn3 {\r\n            font-size: 11px;\r\n            color: #999999;\r\n            background-color: white;\r\n            position: absolute;\r\n            right: 0;\r\n            margin-right: 2vw;\r\n            margin-top: 10vh;\r\n          }\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  .uni-pagination {\r\n    width: 90vw;\r\n    margin-left: 5vw;\r\n    margin-top: 2vh;\r\n  }\r\n\r\n  .bottom-content {\r\n    .bottom-pic {\r\n      width: 100vw;\r\n      height: 35vh;\r\n      position: fixed;\r\n      bottom: 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1669620168717\n      var cssReload = require(\"E:/code/workSpace/project/lingting_travel/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}