{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/matting/takeVideo.vue?9360","webpack:///./src/pages/matting/takeVideo.vue?fcac","webpack:///./src/pages/matting/takeVideo.vue?54b9","webpack:///./src/pages/matting/takeVideo.vue?387b","uni-app:///src/pages/matting/takeVideo.vue","webpack:///./src/pages/matting/takeVideo.vue?d513","webpack:///./src/pages/matting/takeVideo.vue?ad70"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","status","src1","src2","frame1_src","frame2_src","templateSrc","camera","onLoad","option","console","methods","handleBack","uni","delta","startRecord","success","fail","stopRecord","url","filePath","error","e","title","showCancel","res","scope","icon"],"mappings":";;;;;;;;;;;;AAAA;;AAGA;;AACA;;;;AAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGAC,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACc;;;AAGtE;AACmI;AACnI,gBAAgB,gJAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kUAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAsc,CAAgB,keAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC8B1d;EACAC,IADA,kBACA;IACA;MACAC,SADA;MAEAC,sCAFA;MAGAC,sCAHA;MAIAC,+CAJA;MAKAC,+CALA;MAMAC,cANA;MAOAC;IAPA;EAUA,CAZA;EAaAC,MAbA,kBAaAC,MAbA,EAaA;IACA;IACAC;IACAA;IAEA,wCALA,CAKA;EAEA,CApBA;EAqBAC;IACAC,UADA,wBACA;MACAC;QAAAC;MAAA;IACA,CAHA;IAIAC,WAJA,yBAIA;MAAA;;MAEA;QACAC;UACAN;UACAA;UACA;QACA,CALA;QAMAO;UACAP;UACA,yCAFA,CAEA;;UACA;QACA;MAVA;IAYA,CAlBA;IAmBAQ,UAnBA,wBAmBA;MAEA;MAGA;QACA;QACAF;UACAN;UACAA,gCAFA,CAGA;UACA;UACA;UACA;;UAIAG;YACAM;UADA;UAIAN;YACA;YACAO,2BAFA;YAGAJ,OAHA,qBAGA;cACAN;YACA;UALA;QASA,CAzBA;QA0BAO;UACAP;QAGA;MA9BA;IAkCA,CA1DA;IA2DAW,KA3DA,iBA2DAC,CA3DA,EA2DA;MACAZ;MACAG;QACAU,yBADA;QAEAC,iBAFA;QAGAR;UACAH;YACAG,OADA,mBACAS,GADA,EACA;cACA;gBACAf;gBACAG;kBACAa,qBADA;kBAEAV;oBACAN;oBACAG;sBACAU,cADA;sBAEAI;oBAFA;kBAIA,CARA;kBASAV;oBACAJ;sBACAU,eADA;sBAEAP,OAFA,mBAEAS,GAFA,EAEA;wBACA;0BACAZ;4BACAG,OADA,qBACA;8BACAN;4BACA,CAHA;4BAIAO,IAJA,kBAIA;8BACAP;4BACA;0BANA;wBASA,CAVA,MAWA;0BACAA;wBACA;sBAEA;oBAlBA;kBAoBA;gBA9BA;cAiCA;YAEA;UAvCA;QA0CA;MA9CA;IAmDA,CAhHA,CAkHA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EA1HA;AArBA,C;;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAAi3B,CAAgB,61BAAG,EAAC,C;;;;;;;;;;;ACAr4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/matting/takeVideo.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/matting/takeVideo.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./takeVideo.vue?vue&type=template&id=355279ec&\"\nvar renderjs\nimport script from \"./takeVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./takeVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./takeVideo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/matting/takeVideo.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./takeVideo.vue?vue&type=template&id=355279ec&\"","var components\ntry {\n  components = {\n    uniCountdown: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-ui/lib/uni-countdown/uni-countdown\" */ \"@dcloudio/uni-ui/lib/uni-countdown/uni-countdown.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./takeVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./takeVideo.vue?vue&type=script&lang=js&\"","<template>\r\n    <view class=\"video-wrap\">\r\n        <camera v-if=\"templateSrc == 1 \" device-position=\"back\" flash=\"off\" @error=\"error\" class=\"camera-content\">\r\n        </camera>\r\n        <camera v-if=\"templateSrc == 2 \" device-position=\"front\" flash=\"off\" @error=\"error\" class=\"camera-content\">\r\n        </camera>\r\n        <camera v-if=\"templateSrc > 2 \" device-position=\"back\" flash=\"off\" @error=\"error\" class=\"camera-content\">\r\n        </camera>\r\n\r\n        <!-- <button type=\"primary\" @click=\"takePhoto\">拍照</button> -->\r\n\r\n        <img src=\"/static/images/back.png\" class=\"back-btn\" @click=\"handleBack\" />\r\n        <img v-if=\"templateSrc == 1\" :src=\"frame1_src\" class=\"frame\" />\r\n        <img v-if=\"templateSrc == 2\" :src=\"frame2_src\" class=\"frame\" />\r\n\r\n        <uni-countdown v-if=\"status !== 0\" :show-day=\"false\" :second=\"14\" color=\"red\" class=\"countdown\"></uni-countdown>\r\n        <img v-if=\"status === 0\" @tap=\"startRecord\" class=\"btn\" :src=\"src1\" />\r\n        <img v-else @tap=\"stopRecord\" class=\"btn\" :src=\"src2\" />\r\n        <!-- <uni-countdown :show-day=\"false\" :hour=\"12\" :minute=\"12\" :second=\"12\"></uni-countdown> -->\r\n\r\n\r\n\r\n        <!-- <button type=\"default\" @click=\"stopRecord\" class=\"stop-btn\">\r\n            结束录像\r\n        </button> -->\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            status: 0,\r\n            src1: \"/static/images/record_btn1.png\",\r\n            src2: \"/static/images/record_btn2.png\",\r\n            frame1_src: this.baseUrl + \"/image/frame1.png/\",\r\n            frame2_src: this.baseUrl + \"/image/frame2.png/\",\r\n            templateSrc: 0,\r\n            camera: \"\",\r\n\r\n        };\r\n    },\r\n    onLoad(option) {\r\n        this.templateSrc = option.templateSrc - 0\r\n        console.log(\"sssss\");\r\n        console.log(this.templateSrc);\r\n\r\n        this.camera = uni.createCameraContext(); //创建照相机对象\r\n\r\n    },\r\n    methods: {\r\n        handleBack() {\r\n            uni.navigateBack({ delta: 1 })\r\n        },\r\n        startRecord() {\r\n\r\n            this.camera.startRecord({\r\n                success: (res) => {\r\n                    console.log(res);\r\n                    console.log(\"sdadssada\");\r\n                    this.status = 1;\r\n                },\r\n                fail: (err) => {\r\n                    console.log(err);\r\n                    this.camera = uni.createCameraContext(); //创建照相机对象\r\n                    this.startRecord()\r\n                },\r\n            });\r\n        },\r\n        stopRecord() {\r\n\r\n            let templateId = this.templateSrc + \"\"\r\n\r\n\r\n            this.camera.stopRecord({\r\n                // compressed: true,\r\n                success: (res) => {\r\n                    console.log(res);\r\n                    console.log(\"ssssss3123131233\");\r\n                    // uni.showToast({\r\n                    //     title: \"保存成功\",\r\n                    //     duration: 500,\r\n                    // });\r\n                   \r\n\r\n\r\n                    uni.navigateTo({\r\n                        url: \"/pages/matting/index?videoSrc=\" + res.tempVideoPath + \"&templateSrc=\" + templateId,\r\n                    });\r\n\r\n                    uni.saveVideoToPhotosAlbum({\r\n                        //保存视频到本地\r\n                        filePath: res.tempVideoPath,\r\n                        success() {\r\n                            console.log(\"save success!\");\r\n                        },\r\n                    });\r\n\r\n\r\n                },\r\n                fail: (err) => {\r\n                    console.log(err);\r\n\r\n\r\n                },\r\n            });\r\n\r\n\r\n        },\r\n        error(e) {\r\n            console.log(e.detail);\r\n            uni.showModal({\r\n                title: \"请授权照相机权限，以便正常使用！\",\r\n                showCancel: false,\r\n                success: () => {\r\n                    uni.getSetting({\r\n                        success(res) {\r\n                            if (!res.authSetting['scope.camera']) {\r\n                                console.log(\"111111\");\r\n                                uni.authorize({\r\n                                    scope: 'scope.camera',\r\n                                    success:(res)=> {\r\n                                        console.log(res);\r\n                                        uni.showToast({\r\n                                            title: '授权成功!',\r\n                                            icon: 'none',\r\n                                        })\r\n                                    },\r\n                                    fail:()=>{\r\n                                        uni.showModal({\r\n                                            title:'是否重新授权',\r\n                                            success(res){\r\n                                                if(res.confirm){\r\n                                                    uni.openSetting({\r\n                                                        success(){\r\n                                                            console.log(\"权限开启成功\");\r\n                                                        },\r\n                                                        fail(){\r\n                                                            console.log(\"权限开启失败\");\r\n                                                        }\r\n                                            \r\n                                                    })\r\n                                                }\r\n                                                else if(res.cancel){\r\n                                                    console.log(\"拒绝开启权限\");\r\n                                                }\r\n\r\n                                            }\r\n                                        })\r\n                                    }\r\n    \r\n                                })\r\n                            }\r\n\r\n                        }\r\n                    })\r\n\r\n                }\r\n\r\n\r\n            })\r\n\r\n        },\r\n\r\n        // takePhoto() {\r\n        //     const ctx = uni.createCameraContext();\r\n        //     ctx.takePhoto({\r\n        //         quality: 'high',\r\n        //         success: (res) => {\r\n        //             this.src = res.tempImagePath\r\n        //         }\r\n        //     });\r\n        // },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.video-wrap {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    // justify-content: center;\r\n    // align-items: center;\r\n    position: relative;\r\n\r\n    .camera-content {\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: -1;\r\n        position: absolute;\r\n    }\r\n\r\n    .back-btn {\r\n        width: 30rpx;\r\n        height: 50rpx;\r\n        position: absolute;\r\n        margin-top: 12%;\r\n        margin-left: 5%;\r\n    }\r\n\r\n    .frame {\r\n        width: 100vw;\r\n        height: 100vh;\r\n    }\r\n\r\n    .countdown {\r\n        margin-left: 40%;\r\n        margin-top: 180%;\r\n        position: absolute;\r\n    }\r\n\r\n\r\n    .btn {\r\n        width: 160rpx;\r\n        height: 160rpx;\r\n        margin-left: 40%;\r\n        margin-top: 190%;\r\n        position: absolute;\r\n\r\n\r\n    }\r\n\r\n\r\n    // .stop-btn{}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./takeVideo.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./takeVideo.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1669620168657\n      var cssReload = require(\"E:/code/workSpace/project/lingting_travel/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}