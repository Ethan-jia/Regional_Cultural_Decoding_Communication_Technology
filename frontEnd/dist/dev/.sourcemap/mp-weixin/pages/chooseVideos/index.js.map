{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/chooseVideos/index.vue?e9f0","webpack:///./src/pages/chooseVideos/index.vue?1855","webpack:///./src/pages/chooseVideos/index.vue?8b67","webpack:///./src/pages/chooseVideos/index.vue?e8ee","uni-app:///src/pages/chooseVideos/index.vue","webpack:///./src/pages/chooseVideos/index.vue?4095","webpack:///./src/pages/chooseVideos/index.vue?6c1f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","templateSrc","bg_pic","videoList","videoShow","maxCount","openId","secretKey","styleId","minTime","type","onLoad","option","console","onBackPress","methods","chooseVideo","uni","sourceType","compressed","success","res","url","header","filePath","name","formData","fail","that","title","content","showCancel","error","deleteVideo","index","setTimeout","method","duration","icon","handleGoPage","videoClear"],"mappings":"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","file":"pages/chooseVideos/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chooseVideos/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=006dd36a&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chooseVideos/index.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=006dd36a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n    <view class=\"videos-wrap\">\r\n        <view class=\"videos-title\">\r\n            <image src=\"/static/images/upload.png\" class=\"upload-pic\" />\r\n            <text class=\"title-content1\">请添加本地视频</text>\r\n            <text class=\"title-content2\">(建议上传6~9个视频,每个时长大于{{ minTime }}s)</text>\r\n        </view>\r\n        <view class=\"up-page\">\r\n            <view class=\"videos-box\" v-for=\"(item, index) in videoList\" :key=\"index\">\r\n                <video class=\"full\" :src=\"item\"></video>\r\n                <view class=\"delete-icon\" @tap=\"deleteVideo(index)\">\r\n                    <image class=\"full\" src=\"/static/images/delete.png\" />\r\n                </view>\r\n            </view>\r\n            <view v-if=\"videoShow\" @tap=\"chooseVideo\" class=\"box-mode\">\r\n                <image class=\"full\" src=\"/static/images/add.png\" />\r\n            </view>\r\n        </view>\r\n        <view class=\"videos-btn\"><button class=\"btn\" @tap=\"handleGoPage\">\r\n                <text class=\"btn-content\">确认选择</text>\r\n            </button></view>\r\n        <view class=\"bottom-content\">\r\n            <img :src=\"bg_pic\" class=\"bottom-pic\" />\r\n        </view>\r\n    </view>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            templateSrc: \"\",\r\n            bg_pic: this.baseUrl + '/image/bg_pic.png/',\r\n            videoList: [],//视频存放的地址\r\n            videoShow: true,\r\n            maxCount: 9,\r\n            openId: \"\",\r\n            secretKey: \"\",\r\n            styleId: \"\",//仅针对ai, 1代表竖版, 2代表横板\r\n            minTime: \"\",\r\n            type: \"\"\r\n\r\n        }\r\n    },\r\n\r\n    onLoad(option) {\r\n\r\n        // let currentWebview = this.$mp.page.$getAppWebview()\r\n        // currentWebview.setStyle({popGesture:\"none\"})\r\n\r\n        this.templateSrc = option.templateSrc;\r\n        this.type = option.type\r\n        // console.log(\"templateSrc\");\r\n        // console.log(this.templateSrc);\r\n        console.log(\"ssdadsada\");\r\n        console.log(this.type);\r\n\r\n        this.minTime = uni.getStorageSync(\"minTime\")\r\n        this.styleId = uni.getStorageSync(\"styleId\")\r\n        this.openId = uni.getStorageSync(\"openId\")\r\n        this.secretKey = uni.getStorageSync(\"secretKey\")\r\n        this.videoClear() //清理之前的视频，重新选择\r\n    },\r\n    onBackPress() {\r\n        return true\r\n    },\r\n\r\n    methods: {\r\n        chooseVideo() {\r\n            var that = this;\r\n            uni.chooseVideo({\r\n                sourceType: [\"album\"],\r\n                compressed: true,\r\n                success(res) {\r\n                    if (res.duration >= that.minTime && res.duration <= 60) {\r\n                        let tempFilePath = res.tempFilePath\r\n                        uni.uploadFile({\r\n                            url: that.baseUrl + '/videos/upload/',\r\n                            header: that.header,\r\n                            filePath: tempFilePath,\r\n                            name: 'file',\r\n                            formData: {\r\n                                'openId': that.openId,\r\n                                'secretKey': that.secretKey,\r\n                                \"videoName\": tempFilePath,\r\n                                \"type\": that.type\r\n\r\n                            },\r\n                            success: (uploadFileRes) => {\r\n                                console.log(JSON.parse(uploadFileRes.data).code);\r\n                            },\r\n                            fail: (error) => {\r\n                                console.log(error);\r\n                            }\r\n                        })\r\n                        that.videoList = that.videoList.concat(tempFilePath)\r\n                        console.log(that.videoList);\r\n                        if (that.videoList.length == that.maxCount) {\r\n                            that.videoShow = false\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    else {\r\n                        uni.showModal({\r\n                            title: \"提示\",\r\n                            content: \"请上传\" + that.minTime + \"s~60s的视频！\",\r\n                            showCancel: false,\r\n                            success(res) {\r\n                                console.log(res);\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                },\r\n                fail(error) {\r\n                    console.log(error);\r\n                },\r\n            });\r\n        },\r\n        deleteVideo(index) {\r\n            var that = this\r\n            uni.showModal({\r\n                title: '提示',\r\n                content: '是否要删除此视频',\r\n                success(res) {\r\n                    if (res.confirm) {\r\n                        setTimeout(() => {\r\n                            uni.request({\r\n                                url: that.baseUrl + \"/videos/delete\",\r\n                                header: that.header,\r\n                                method: \"GET\",\r\n                                data: {\r\n                                    'openId': that.openId,\r\n                                    'secretKey': that.secretKey,\r\n                                    \"videoName\": that.videoList[index],\r\n                                },\r\n                                success(res) {\r\n                                    console.log(res.data);\r\n                                    if (res.data.code === \"OK\") {\r\n                                        setTimeout(() => {\r\n                                            that.videoList.splice(index, 1)\r\n                                        }, 100)\r\n                                        uni.showToast({\r\n                                            title: \"删除成功!\",\r\n                                            duration: 500,\r\n                                        })\r\n                                    }\r\n                                    else {\r\n                                        uni.showToast({\r\n                                            title: \"删除失败!\",\r\n                                            duration: 500,\r\n                                            icon: \"error\"\r\n                                        })\r\n                                    }\r\n                                },\r\n                                fail(error) {\r\n                                    console.log(error);\r\n                                }\r\n                            });\r\n                        }, 10)\r\n                    }\r\n                    setTimeout(() => {\r\n                        if (that.videoList.length > that.maxCount) {\r\n                            that.videoShow = false\r\n                        }\r\n                        else {\r\n                            that.videoShow = true\r\n                        }\r\n                    }, 200);\r\n\r\n                }\r\n\r\n            })\r\n        },\r\n        handleGoPage() {\r\n            if (this.videoList.length >= 3) {\r\n                if (this.type===\"editing_vertical\" || this.type===\"editing_horizontal\") {\r\n                    uni.navigateTo({\r\n                        url: '/pages/editing/index?videoListNum=' + this.videoList.length + \"&templateSrc=\" + this.templateSrc\r\n                    })\r\n                }\r\n                else {\r\n                    uni.navigateTo({\r\n                        url: '/pages/aiEditing/index?videoListNum=' + this.videoList.length + \"&templateSrc=\" + this.templateSrc\r\n                    })\r\n                }\r\n            }\r\n            else {\r\n                uni.showModal({\r\n                    title: \"提示\",\r\n                    content: \"请至少上传三个视频!\",\r\n                    showCancel: false,\r\n                    success(res) {\r\n                        console.log(res);\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        videoClear() {\r\n            uni.request({\r\n                url: this.baseUrl + \"/videos/clear\",\r\n                method: \"GET\",\r\n                data: {\r\n                    'openId': this.openId,\r\n                    'secretKey': this.secretKey,\r\n                },\r\n                success(res) {\r\n                    console.log(res.data);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.box-mode {\r\n    width: 25vw;\r\n    height: 25vw;\r\n    border-radius: 8rpx;\r\n    overflow: hidden;\r\n    margin-top: 2vh;\r\n    margin-left: 4vw;\r\n}\r\n\r\n.full {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.videos-wrap {\r\n    width: 100vw;\r\n    margin-top: 3vh;\r\n\r\n\r\n    .videos-title {\r\n        display: flex;\r\n        flex-direction: row;\r\n        margin-left: 5vw;\r\n        margin-top: 3vh;\r\n\r\n        .upload-pic {\r\n            width: 20px;\r\n            height: 18px;\r\n            margin-top: 0.2vh;\r\n        }\r\n\r\n        .title-content1 {\r\n            margin-left: 2vw;\r\n            font-weight: bold;\r\n\r\n            letter-spacing: 0.1px;\r\n\r\n        }\r\n\r\n        .title-content2 {\r\n            margin-left: 1vw;\r\n            margin-top: 0.8vh;\r\n            font-size: 11px;\r\n            color: #969696;\r\n        }\r\n\r\n    }\r\n\r\n    .up-page {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        width: 100%;\r\n\r\n        .show-box:nth-child(3n) {\r\n            margin-right: 0rpx;\r\n        }\r\n\r\n        .videos-box {\r\n            position: relative;\r\n            margin-bottom: 4vw;\r\n            margin-right: 4vw;\r\n            @extend .box-mode;\r\n\r\n            .delete-icon {\r\n                height: 30rpx;\r\n                width: 30rpx;\r\n                position: absolute;\r\n                right: 5rpx;\r\n                top: 3rpx;\r\n                z-index: 1000;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    .videos-btn {\r\n        margin-top: 2vh;\r\n\r\n        .btn {\r\n            width: 80vw;\r\n            height: 6vh;\r\n            background-color: #4cca78;\r\n            border-radius: 30px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n\r\n            .btn-content {\r\n                font-size: 16px;\r\n                color: #ffffff;\r\n                letter-spacing: 2px;\r\n\r\n\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    .bottom-content {\r\n        .bottom-pic {\r\n            width: 100vw;\r\n            height: 35vh;\r\n            position: fixed;\r\n            bottom: 0;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1669620168666\n      var cssReload = require(\"E:/code/workSpace/project/lingting_travel/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}